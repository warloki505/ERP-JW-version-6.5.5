<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="ERP Financeiro JW - GestÃ£o Financeira Pessoal v6.5" />
  <title>ERP Financeiro JW - Dashboard v6.5</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- HEADER -->
  <header class="topbar">
    <div class="container topbar__row">
      <h1>ğŸ’° ERP Financeiro JW v6.5</h1>
      <div class="topbar__actions">
        <span id="userName" class="text-muted" style="font-size: 14px;"></span>
        <button id="btnPerfil" class="btn btn--ghost">âš™ï¸ Perfil</button>
        <button id="btnHistorico" class="btn btn--ghost">ğŸ“Š HistÃ³rico</button>
        <button id="btnCharts" class="btn btn--ghost">ğŸ“ˆ GrÃ¡ficos</button>
        <button id="btnConsolidado" class="btn btn--ghost">ğŸ§¾ Consolidado</button>
        <button id="btnMetas" class="btn btn--ghost">ğŸ¯ Metas</button>
        <button id="logoutBtn" class="btn btn--ghost">ğŸšª Sair</button>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="container">
    
    <!-- SELETOR DE MÃŠS -->
    <section class="card" style="margin-top: 24px;">
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap;">
        <div>
          <h2 style="margin-bottom: 4px;">ğŸ“… MÃªs Ativo</h2>
          <p class="text-muted" style="font-size: 14px; margin: 0;">Visualizando dados de <strong id="monthLabel"></strong></p>
        </div>
        <div style="display: flex; gap: 8px;">
          <button id="btnPrevMonth" class="btn btn--ghost">â† Anterior</button>
          <button id="btnCurrentMonth" class="btn btn--primary">MÃªs Atual</button>
          <button id="btnNextMonth" class="btn btn--ghost">PrÃ³ximo â†’</button>
        </div>
      </div>
    </section>

    <!-- RESUMO / KPIs COM DÃVIDAS -->
    <section class="card">
      <h2>ğŸ’¹ RESUMO DO MÃŠS</h2>
      <div class="kpi-grid">
        
        <div class="kpi kpi--receita">
          <div class="kpi__title">ğŸ’µ Renda Total</div>
          <div class="kpi__value" id="kpiRenda">R$ 0,00</div>
        </div>
        
        <div class="kpi kpi--poupanca">
          <div class="kpi__title">ğŸ¦ PoupanÃ§a Total</div>
          <div class="kpi__value" id="kpiPoupanca">R$ 0,00</div>
        </div>
        
        <div class="kpi kpi--essenciais">
          <div class="kpi__title">ğŸ”´ Despesas Essenciais</div>
          <div class="kpi__value" id="kpiEssenciais">R$ 0,00</div>
        </div>
        
        <div class="kpi kpi--livres">
          <div class="kpi__title">ğŸŸ¢ Despesas Livres</div>
          <div class="kpi__value" id="kpiLivres">R$ 0,00</div>
        </div>
        
        <!-- KPI DE DÃVIDAS - DESTAQUE -->
        <div class="kpi kpi--dividas">
          <div class="kpi__title">ğŸ’³ DÃVIDAS TOTAIS</div>
          <div class="kpi__value" id="kpiDividas">R$ 0,00</div>
          <small>âš ï¸ Priorize quitaÃ§Ã£o</small>
        </div>
        
        <div class="kpi kpi--highlight">
          <div class="kpi__title">ğŸ’ Saldo a Distribuir</div>
          <div class="kpi__value" id="kpiSaldoDistribuir">R$ 0,00</div>
          <small>valor ainda nÃ£o comprometido</small>
        </div>
        
      </div>

      <div class="health-row" style="margin-top: 14px;">
        <span id="healthPoupanca" class="status status--info">PoupanÃ§a: â€”</span>
        <span id="healthEndividamento" class="status status--info">Endividamento: â€”</span>
        <span id="healthEssenciais" class="status status--info">Essenciais: â€”</span>
        <span id="healthScore" class="status status--info">Score do mÃªs: â€”</span>
      </div>
    </section>

    <!-- LANÃ‡AMENTOS (4 COLUNAS COM DÃVIDAS) -->
    <section class="grid-4">
      
      <!-- COLUNA 1: RECEITA -->
      <div class="card">
        <h3>ğŸ’µ RECEITA</h3>
        <form id="formReceita" class="form">
          <div class="form-group">
            <label for="receitaData">Data</label>
            <input type="date" id="receitaData" name="data" required />
          </div>
          
          <div class="form-group">
            <label for="receitaValor">Valor (R$)</label>
            <input type="number" id="receitaValor" name="valor" step="0.01" min="0.01" placeholder="0,00" required />
          </div>
          
          <div class="form-group">
            <label for="receitaCategoria">Categoria</label>
            <select id="receitaCategoria" name="categoria" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="receitaBanco">Banco/Conta</label>
            <select id="receitaBanco" name="banco" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="receitaDescricao">DescriÃ§Ã£o (opcional)</label>
            <input type="text" id="receitaDescricao" name="descricao" placeholder="Ex: SalÃ¡rio de fevereiro" />
          </div>
          
          <button class="btn btn--success" type="submit" style="width: 100%;">
            âœ“ Adicionar Receita
          </button>
        </form>
      </div>

      <!-- COLUNA 2: POUPANÃ‡A -->
      <div class="card">
        <h3>ğŸ¦ POUPANÃ‡A</h3>
        <form id="formPoupanca" class="form">
          <div class="form-group">
            <label for="poupancaData">Data</label>
            <input type="date" id="poupancaData" name="data" required />
          </div>
          
          <div class="form-group">
            <label for="poupancaValor">Valor (R$)</label>
            <input type="number" id="poupancaValor" name="valor" step="0.01" min="0.01" placeholder="0,00" required />
          </div>
          
          <div class="form-group">
            <label for="poupancaCategoria">Categoria</label>
            <select id="poupancaCategoria" name="categoria" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="poupancaBanco">Banco/Conta</label>
            <select id="poupancaBanco" name="banco" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="poupancaDescricao">DescriÃ§Ã£o (opcional)</label>
            <input type="text" id="poupancaDescricao" name="descricao" placeholder="Ex: Reserva de emergÃªncia" />
          </div>
          
          <button class="btn btn--primary" type="submit" style="width: 100%;">
            âœ“ Adicionar PoupanÃ§a
          </button>
        </form>
      </div>

      <!-- COLUNA 3: DESPESAS -->
      <div class="card">
        <h3>ğŸ’³ DESPESAS</h3>
        <form id="formDespesa" class="form">
          <div class="form-group">
            <label for="despesaData">Data</label>
            <input type="date" id="despesaData" name="data" required />
          </div>
          
          <div class="form-group">
            <label for="despesaValor">Valor (R$)</label>
            <input type="number" id="despesaValor" name="valor" step="0.01" min="0.01" placeholder="0,00" required />
          </div>
          
          <div class="form-group">
            <label for="despesaSubtipo">Tipo de Despesa</label>
            <select id="despesaSubtipo" required>
              <option value="">Selecione</option>
              <option value="essencial">ğŸ”´ Despesa Essencial</option>
              <option value="livre">ğŸŸ¢ Despesa Livre</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="despesaCategoria">Categoria</label>
            <select id="despesaCategoria" required>
              <option value="">Selecione tipo primeiro</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="despesaBanco">Banco/Conta</label>
            <select id="despesaBanco" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="despesaDescricao">DescriÃ§Ã£o (opcional)</label>
            <input type="text" id="despesaDescricao" name="descricao" placeholder="Ex: Conta de luz" />
          </div>
          
          <button class="btn btn--danger" type="submit" style="width: 100%;">
            âœ“ Adicionar Despesa
          </button>
        </form>
      </div>

      <!-- COLUNA 4: DÃVIDAS (NOVO) -->
      <div class="card" style="border: 2px solid var(--divida);">
        <h3>âš ï¸ DÃVIDAS</h3>
        <form id="formDivida" class="form">
          <div class="form-group">
            <label for="dividaData">Data</label>
            <input type="date" id="dividaData" name="data" required />
          </div>
          
          <div class="form-group">
            <label for="dividaValor">Valor (R$)</label>
            <input type="number" id="dividaValor" name="valor" step="0.01" min="0.01" placeholder="0,00" required />
          </div>
          
          <div class="form-group">
            <label for="dividaCategoria">Tipo de DÃ­vida</label>
            <select id="dividaCategoria" name="categoria" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="dividaBanco">Banco/Origem</label>
            <select id="dividaBanco" name="banco" required>
              <option value="">Selecione</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="dividaDescricao">DescriÃ§Ã£o (opcional)</label>
            <input type="text" id="dividaDescricao" name="descricao" placeholder="Ex: Parcelamento em 12x" />
          </div>
          
          <button class="btn btn--danger" type="submit" style="width: 100%; background: var(--divida);">
            âš ï¸ Registrar DÃ­vida
          </button>
        </form>
      </div>

    </section>

    <!-- TABELA DE LANÃ‡AMENTOS -->
    <section class="card">
      <h2>ğŸ“‹ TODOS OS LANÃ‡AMENTOS</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Tipo</th>
              <th>Data</th>
              <th>Valor</th>
              <th>Categoria</th>
              <th>Banco</th>
              <th>DescriÃ§Ã£o</th>
              <th>AÃ§Ãµes</th>
            </tr>
          </thead>
          <tbody id="txTbody">
            <tr>
              <td colspan="7" style="text-align: center; padding: 40px;">
                <span class="text-muted">Nenhum lanÃ§amento neste mÃªs</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- RODAPÃ‰ COM AÃ‡Ã•ES -->
    <section class="footer-actions">
      <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="btn btn--ghost">
        â†‘ Voltar ao topo
      </button>
      <button onclick="window.print()" class="btn btn--ghost">
        ğŸ–¨ï¸ Imprimir / Exportar PDF
      </button>
      <button onclick="location.href='charts.html'" class="btn btn--ghost">
        ğŸ“Š Exportar GrÃ¡ficos
      </button>
      <button id="btnLimparMes" class="btn btn--danger">
        ğŸ—‘ï¸ Limpar todos os dados do mÃªs
      </button>
    </section>

  </main>

  <!-- MODAL DE EDIÃ‡ÃƒO -->
  <div id="modalEdit" class="modal-overlay hidden" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3>âœï¸ Editar LanÃ§amento</h3>
        <button onclick="closeEditModal()" class="btn btn--ghost btn-mini">âœ•</button>
      </div>
      <div class="modal-body">
        <form id="formEdit" class="form">
          <input type="hidden" id="editId" />
          <input type="hidden" id="editTipo" />
          
          <div class="form-group">
            <label for="editData">Data</label>
            <input type="date" id="editData" required />
          </div>
          
          <div class="form-group">
            <label for="editValor">Valor (R$)</label>
            <input type="number" id="editValor" step="0.01" min="0.01" required />
          </div>
          
          <div class="form-group">
            <label for="editCategoria">Categoria</label>
            <select id="editCategoria" required></select>
          </div>
          
          <div class="form-group">
            <label for="editBanco">Banco</label>
            <select id="editBanco" required></select>
          </div>
          
          <div class="form-group">
            <label for="editDescricao">DescriÃ§Ã£o</label>
            <input type="text" id="editDescricao" />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button onclick="closeEditModal()" class="btn btn--ghost">Cancelar</button>
        <button onclick="saveEdit()" class="btn btn--primary">ğŸ’¾ Salvar alteraÃ§Ãµes</button>
      </div>
    </div>
  </div>


  <!-- MODAL: FIXAR LANÃ‡AMENTO (RECORRÃŠNCIA) -->
  <div id="modalFixar" class="modal-overlay hidden" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3>ğŸ“Œ Fixar lanÃ§amento</h3>
        <button onclick="closeFixarModal()" class="btn btn--ghost btn-mini">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="text-muted" style="margin-top: 0;">Este lanÃ§amento serÃ¡ repetido automaticamente nos meses escolhidos.</p>

        <div class="status status--info" style="margin-bottom: 12px;">
          <strong id="fixResumo">â€”</strong>
        </div>

        <form id="formFixar" class="form" onsubmit="event.preventDefault(); saveFixar();">
          <div class="form-group">
            <label for="fixInicio">InÃ­cio (mÃªs)</label>
            <input type="month" id="fixInicio" required />
          </div>

          <div class="form-group">
            <label for="fixFim">Fim (mÃªs)</label>
            <input type="month" id="fixFim" />
            <div style="margin-top: 8px;">
              <label style="display:flex; align-items:center; gap:8px; font-size: 13px;">
                <input type="checkbox" id="fixSemFim" />
                Sem fim
              </label>
            </div>
          </div>

          <div class="form-group">
            <label style="display:flex; align-items:center; gap:8px; font-size: 13px;">
              <input type="checkbox" id="fixAplicarAtual" checked />
              Aplicar tambÃ©m no mÃªs atual
            </label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button onclick="closeFixarModal()" class="btn btn--ghost">Cancelar</button>
        <button onclick="saveFixar()" class="btn btn--primary">ğŸ“Œ Fixar</button>
      </div>
    </div>
  </div>


    <!-- SCRIPTS -->
  <script src="js/constantes.js"></script>
  <script src="js/config.js"></script>
  <script src="js/core.js"></script>
  <script src="js/script.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
